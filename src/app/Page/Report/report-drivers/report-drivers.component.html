<app-two-column
  [pageTitle]="title"
  [modalTitle]="modalTitle"
  [columnsCustom]="baseManager.columnsGridCustom"
  [enableAdd]="hasPermission(permissionKeyNameAdd)"
  [enableOption]="hasPermission(permissionKeyNameOption)"
  (onSearch)="onSearch_Click()"
  (onCreate)="onCreate_Click()"
  (onSave)="onSave_Click($event)"
  (onSaveCustomColumns)="onSaveCustomColumns_Click()"
>
  <div class="rightpanel-search">
    <!-- Bắt đầu control search ở đây -->
    <div class="rightpanel-search-items">
      <div class="col-label">Lái xe</div>
      <div class="col-input">
        <input
          type="text"
          placeholder="Nhập nội dung tìm kiếm"
          [(ngModel)]="searchContent"
        />
      </div>
    </div>

    <div class="rightpanel-search-items">
      <i
        value="Tìm kiếm"
        (click)="onSearch_Click()"
        class="fa fa-search fa-button fa-button-blue"
      >
        Tìm kiếm</i
      >
    </div>
    <!-- kết thúc control search ở đây -->
  </div>

  <div class="rightpanel-data">
    <!-- Bắt đầu control grid ở đây -->
    <kendo-grid
      #grid
      [data]="dataGrid"
      [pageSize]="pageSize"
      [pageable]="true"
      [loading]="isLoading"
      [skip]="skip"
      scrollable="none"
      (edit)="onRowComand_Click($event)"
      (remove)="onRowComand_Click($event)"
      (pageChange)="pageChange($event)"
      (excelExport)="exportExcel($event, grid)"
    >
      <ng-template
        kendoGridToolbarTemplate
        *ngIf="
          this.dataGrid.data.length > 0 &&
          hasPermission(permissionKeyNameExport)
        "
      >
        <i
          kendoGridExcelCommand
          class="fa fa-file-excel-o"
          aria-hidden="true"
          style="color: green"
          title="Xuất excel"
          icon="file-excel"
          >Xuất excel</i
        >
        <i
          kendoGridPDFCommand
          class="fa fa-file-pdf-o"
          aria-hidden="true"
          title="Xuất pdf"
          style="color: orangered"
          icon="file-pdf"
          (click)="exportPdf($event, grid)"
          >Xuất pdf</i
        >
      </ng-template>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        title="STT"
        field="rowIndex"
        width="50"
      >
        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
          {{ rowIndex + 1 }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        [hidden]="!checkIsShowColumn('FK_CompanyID')"
        field="FK_CompanyID"
        title="Công ty"
      >
        <ng-template
          kendoGridFooterTemplate
          *ngIf="baseManager.columnsSummaryItems.length > 0"
        >
          {{ columnsSummaryItemsResponse.column1 }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="DisplayName"
        title="Tên hiển thị"
        [hidden]="!checkIsShowColumn('DisplayName')"
      >
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="Name"
        title="Tên"
        [hidden]="!checkIsShowColumn('Name')"
      >
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="FK_DepartmentID"
        title="Phòng ban"
        [hidden]="!checkIsShowColumn('FK_DepartmentID')"
      >
        <ng-template
          kendoGridFooterTemplate
          *ngIf="baseManager.columnsSummaryItems.length > 0"
        >
          {{ columnsSummaryItemsResponse.column4 }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="EmployeeCode"
        title="Mã LX"
        [hidden]="!checkIsShowColumn('EmployeeCode')"
      >
      </kendo-grid-column>

      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="Flags"
        title="Flags"
        [hidden]="!checkIsShowColumn('Flags')"
      >
        <ng-template
          kendoGridFooterTemplate
          *ngIf="baseManager.columnsSummaryItems.length > 0"
        >
          {{ columnsSummaryItemsResponse.column6 }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-command-column
        field="command"
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        title="Sửa"
        width="50"
        [hidden]="
          !checkIsShowColumn('command') ||
          !hasPermission(permissionKeyNameUpdate)
        "
      >
        <ng-template kendoGridCellTemplate let-dataItems="dataItems">
          <button kendoGridEditCommand>
            <i class="fa fa-edit" aria-hidden="true"></i>
          </button>
        </ng-template>
      </kendo-grid-command-column>
      <kendo-grid-command-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        title="Xóa"
        field="command"
        width="50"
        [hidden]="
          !checkIsShowColumn('command') ||
          !hasPermission(permissionKeyNameDelete)
        "
      >
        <ng-template kendoGridCellTemplate let-dataItems="dataItems">
          <button kendoGridRemoveCommand>
            <i
              class="fa fa-trash"
              aria-hidden="true"
              style="font-size: 15px"
            ></i>
          </button>
        </ng-template>
      </kendo-grid-command-column>
      <kendo-grid-excel
        fileName="{{ reportName + '.xlsx' }}"
        [fetchData]="allDataGrid"
      >
      </kendo-grid-excel>
      <ng-template
        kendoPagerTemplate
        let-totalPages="totalPages"
        let-currentPage="currentPage"
      >
        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
        <kendo-pager-numeric-buttons
          [buttonCount]="buttonCount"
        ></kendo-pager-numeric-buttons>
        <kendo-pager-next-buttons></kendo-pager-next-buttons>
        <kendo-pager-info></kendo-pager-info>
      </ng-template>
    </kendo-grid>
    <!-- kết thúc control grid ở đây -->
  </div>

  <div class="modal-content">
    <!-- Bắt đầu cho modal ở đây -->
    <app-driver-edit [entity]="currentDataModel"></app-driver-edit>
    <!-- Kết thúc cho modal ở đây -->
  </div>
</app-two-column>
