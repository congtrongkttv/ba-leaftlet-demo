<app-form-report-base
  [pageTitle]="pageTitle"
  [modalTitle]="modalTitle"
  [columnsCustom]="baseManager.columnsGridCustom"
  [enableAdd]="authorized.canAdd"
  [enableOption]="authorized.canOption"
  (onSearch)="onSearch_Click()"
  (onCreate)="onCreate_Click()"
  (onSave)="onSave_Click($event)"
  (onSaveCustomColumns)="onSaveCustomColumns_Click($event)"
>
  <div class="rightpanel-search">
    <!-- Bắt đầu control search ở đây -->
    <div class="rightpanel-search-items">
      <div class="col-label">Tên người dùng</div>
      <div class="col-input">
        <input
          type="text"
          placeholder="Nhập nội dung tìm kiếm"
          [(ngModel)]="searchContent"
        />
      </div>
    </div>

    <div class="rightpanel-search-items">
      <i
        value="Tìm kiếm"
        (click)="onSearch_Click()"
        class="fa fa-search fa-button fa-button-blue"
      >
        Tìm kiếm</i
      >
    </div>
    <!-- kết thúc control search ở đây -->
  </div>

  <div class="rightpanel-data">
    <!-- Bắt đầu control grid ở đây -->
    <kendo-grid
      #grid
      [data]="dataGrid"
      [pageSize]="pageSize"
      [pageable]="true"
      [loading]="isLoading"
      [skip]="skip"
      scrollable="none"
      (edit)="onRowComand_Click($event)"
      (remove)="onRowComand_Click($event)"
      (pageChange)="pageChange($event)"
      (excelExport)="exportExcel($event, grid)"
    >
      <ng-template kendoGridNoRecordsTemplate>
        Không có dữ liệu
        <i class="fa fa-refresh" (click)="this.bindData()"></i>
      </ng-template>
      <ng-template
        kendoGridToolbarTemplate
        *ngIf="this.dataGrid.data.length > 0 && authorized.canExport"
      >
        <i
          kendoGridExcelCommand
          class="fa fa-file-excel-o fa-button fa-button-white"
          aria-hidden="true"
          style="color: green"
          title="Xuất excel"
          icon="file-excel"
          >Xuất excel</i
        >

      </ng-template>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        title="STT"
        field="rowNumber"
        width="50"
      >
        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
          {{ rowIndex + 1 }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="FK_CompanyID"
        title="Công ty"
      >
        <ng-template
          kendoGridFooterTemplate
          *ngIf="baseManager.columnsSummary.length > 0"
        >
          {{ columnsSummaryItems[1] }}
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="Username"
        title="Tên đăng nhập"
      >
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="Fullname"
        title="Tên hiển thị"
      >
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="PhoneNumber"
        title="SĐT"
      >
      </kendo-grid-column>
      <kendo-grid-column
        [headerClass]="'table-report-header'"
        [class]="'table-report-body'"
        [footerClass]="'table-report-header'"
        field="Email"
        title="Email"
      >
      </kendo-grid-column>

      <kendo-grid-excel
        fileName="{{ reportName + '.xlsx' }}"
        [fetchData]="allDataGrid"
      >
      </kendo-grid-excel>
      <ng-container *ngIf="isMasterDetail">
        <div *kendoGridDetailTemplate="let dataItem">
          <app-grid-detail
            [detail]="dataItem"
            [fieldsDetail]="baseManager.columnDetail"
            [viewDetail]="viewDetail"
          >
          </app-grid-detail>
        </div>
      </ng-container>
      <ng-template
        kendoPagerTemplate
        let-totalPages="totalPages"
        let-currentPage="currentPage"
      >
        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
        <kendo-pager-numeric-buttons
          [buttonCount]="buttonCount"
        ></kendo-pager-numeric-buttons>
        <kendo-pager-next-buttons></kendo-pager-next-buttons>
        <kendo-pager-info></kendo-pager-info>
      </ng-template>
    </kendo-grid>

    <!-- kết thúc control grid ở đây -->
  </div>

  <div class="modal-content">
    <!-- Bắt đầu cho modal ở đây -->
    <form>
      <app-user-edit [entity]="currentDataModel"></app-user-edit>
    </form>
    <!-- Kết thúc cho modal ở đây -->
  </div>
</app-form-report-base>
